<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Julen Astigarraga y Verónica Cruz-Alonso">
<meta name="dcterms.date" content="2024-05-06">

<title>Functional Programming with R (exercises solutions)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="exercises_solutions_files/libs/clipboard/clipboard.min.js"></script>
<script src="exercises_solutions_files/libs/quarto-html/quarto.js"></script>
<script src="exercises_solutions_files/libs/quarto-html/popper.min.js"></script>
<script src="exercises_solutions_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="exercises_solutions_files/libs/quarto-html/anchor.min.js"></script>
<link href="exercises_solutions_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="exercises_solutions_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="exercises_solutions_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="exercises_solutions_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="exercises_solutions_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#exercise" id="toc-exercise" class="nav-link active" data-scroll-target="#exercise">2.2.1 Exercise</a></li>
  <li><a href="#exercise-1" id="toc-exercise-1" class="nav-link" data-scroll-target="#exercise-1">2.2.2 Exercise</a></li>
  <li><a href="#exercise-2" id="toc-exercise-2" class="nav-link" data-scroll-target="#exercise-2">5.0.1 Exercise</a></li>
  <li><a href="#exercise-3" id="toc-exercise-3" class="nav-link" data-scroll-target="#exercise-3">5.0.2 Exercise</a></li>
  <li><a href="#exercise-4" id="toc-exercise-4" class="nav-link" data-scroll-target="#exercise-4">5.2.1 Exercise</a></li>
  <li><a href="#exercise-5" id="toc-exercise-5" class="nav-link" data-scroll-target="#exercise-5">8.1.1 Exercise</a></li>
  <li><a href="#exercise-6" id="toc-exercise-6" class="nav-link" data-scroll-target="#exercise-6">8.1.2 Exercise</a></li>
  <li><a href="#exercise-7" id="toc-exercise-7" class="nav-link" data-scroll-target="#exercise-7">8.2.1 Exercise</a></li>
  <li><a href="#exercise-8" id="toc-exercise-8" class="nav-link" data-scroll-target="#exercise-8">9.1.1 Exercise</a></li>
  <li><a href="#advanced-exercise" id="toc-advanced-exercise" class="nav-link" data-scroll-target="#advanced-exercise">9.1.2 Advanced exercise</a></li>
  <li><a href="#exercise-9" id="toc-exercise-9" class="nav-link" data-scroll-target="#exercise-9">9.2.1 Exercise</a></li>
  <li><a href="#exercise-10" id="toc-exercise-10" class="nav-link" data-scroll-target="#exercise-10">10.1.1 Exercise</a></li>
  <li><a href="#advanced-exercise-1" id="toc-advanced-exercise-1" class="nav-link" data-scroll-target="#advanced-exercise-1">10.1.2 Advanced exercise</a></li>
  <li><a href="#exercise-11" id="toc-exercise-11" class="nav-link" data-scroll-target="#exercise-11">11.3.1 Exercise</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="exercises_solutions.md"><i class="bi bi-file-code"></i>Github (GFM)</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Functional Programming with R (exercises solutions)</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Julen Astigarraga y Verónica Cruz-Alonso </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">05/06/2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="exercise" class="level2">
<h2 class="anchored" data-anchor-id="exercise">2.2.1 Exercise</h2>
<ol type="1">
<li><p>With the penguins dataset, create an object with individuals of the Adelie species and arrange the <code>data.frame</code> according to flipper length.</p></li>
<li><p>Create an object from the previous one where you select the island and the variables related to the bill.</p></li>
<li><p>Create an object from the one created in step 1 where you select everything except the species.</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
✔ ggplot2 3.4.2     ✔ purrr   1.0.1
✔ tibble  3.2.1     ✔ dplyr   1.1.2
✔ tidyr   1.3.0     ✔ stringr 1.5.0
✔ readr   2.1.2     ✔ forcats 0.5.1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'ggplot2' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tibble' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tidyr' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'purrr' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'dplyr' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'stringr' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>adelie <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Adelie"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(flipper_length_mm)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 2</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>adelie_subset <span class="ot">&lt;-</span> adelie <span class="sc">|&gt;</span> </span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(island, <span class="fu">contains</span>(<span class="st">"bill"</span>))</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 3</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>adelie2 <span class="ot">&lt;-</span> adelie <span class="sc">|&gt;</span> </span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>species)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="exercise-1" class="level2">
<h2 class="anchored" data-anchor-id="exercise-1">2.2.2 Exercise</h2>
<ol type="1">
<li><p>With the penguins dataset, count the number of cases on each island and calculate the mean flipper length for each island.</p></li>
<li><p>Calculate the ratio between the weight in kg and the flipper length for each individual.</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(island) <span class="sc">|&gt;</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_flipper_length =</span> <span class="fu">mean</span>(flipper_length_mm, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  island        n mean_flipper_length
  &lt;fct&gt;     &lt;int&gt;               &lt;dbl&gt;
1 Biscoe      168                210.
2 Dream       124                193.
3 Torgersen    52                191.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mass_by_length =</span> (body_mass_g <span class="sc">/</span> <span class="dv">1000</span>) <span class="sc">/</span> flipper_length_mm) <span class="sc">|&gt;</span> </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(mass_by_length)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 1
   mass_by_length
            &lt;dbl&gt;
 1         0.0207
 2         0.0204
 3         0.0167
 4        NA     
 5         0.0179
 6         0.0192
 7         0.0200
 8         0.0240
 9         0.0180
10         0.0224
# ℹ 334 more rows</code></pre>
</div>
</div>
</section>
<section id="exercise-2" class="level2">
<h2 class="anchored" data-anchor-id="exercise-2">5.0.1 Exercise</h2>
<p>Create your first function that fulfills the functionality of dividing any value by 100.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>divide_by_100 <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">/</span> <span class="dv">100</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="fu">divide_by_100</span>(<span class="dv">30</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.3</code></pre>
</div>
</div>
</section>
<section id="exercise-3" class="level2">
<h2 class="anchored" data-anchor-id="exercise-3">5.0.2 Exercise</h2>
<p>Create a function to standardize (i.e., subtract the mean and divide by the standard deviation) the numerical variables of the penguins dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># R base</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>standardise <span class="ot">&lt;-</span> <span class="cf">function</span>(x, my.na.rm) {</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  (x <span class="sc">-</span> <span class="fu">mean</span>(x, <span class="at">na.rm =</span> my.na.rm)) <span class="sc">/</span> <span class="fu">sd</span>(x, <span class="at">na.rm =</span> my.na.rm)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="fu">standardise</span>(penguins<span class="sc">$</span>bill_length_mm, <span class="at">my.na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] -0.88320467 -0.80993901 -0.66340769          NA -1.32279862 -0.84657184
  [7] -0.91983750 -0.86488825 -1.79902541 -0.35202864 -1.12131806 -1.12131806
 [13] -0.51687637 -0.97478674 -1.70744334 -1.34111504 -0.95647033 -0.26044656
 [19] -1.74407616  0.38062795 -1.12131806 -1.13963448 -1.46932994 -1.04805240
 [25] -0.93815391 -1.57922843 -0.60845845 -0.62677486 -1.10300165 -0.62677486
 [31] -0.80993901 -1.23121655 -0.80993901 -0.55350920 -1.37774787 -0.86488825
 [37] -0.93815391 -0.31539581 -1.15795089 -0.75498976 -1.35943145 -0.57182562
 [43] -1.45101353  0.03261607 -1.26784938 -0.79162259 -0.51687637 -1.17626731
 [49] -1.45101353 -0.29707939 -0.79162259 -0.70004052 -1.63417768 -0.35202864
 [55] -1.72575975 -0.46192713 -0.90152108 -0.60845845 -1.35943145 -1.15795089
 [61] -1.50596277 -0.48024354 -1.15795089 -0.51687637 -1.37774787 -0.42529430
 [67] -1.54259560 -0.51687637 -1.46932994 -0.38866147 -1.90892390 -0.77330618
 [73] -0.79162259  0.34399512 -1.54259560 -0.20549732 -0.55350920 -1.23121655
 [79] -1.41438070 -0.33371222 -1.70744334 -0.18718091 -1.32279862 -1.61586126
 [85] -1.21290014 -0.48024354 -1.39606428 -1.28616579 -1.02973599 -0.91983750
 [91] -1.50596277 -0.51687637 -1.81734182 -0.79162259 -1.41438070 -0.57182562
 [97] -1.06636882 -0.66340769 -1.98218956 -0.13223166 -1.63417768 -0.53519279
[103] -1.13963448 -1.12131806 -1.10300165 -0.77330618 -0.97478674 -1.04805240
[109] -1.06636882 -0.13223166 -1.06636882  0.30736229 -0.77330618 -0.31539581
[115] -0.79162259 -0.22381374 -0.97478674 -1.21290014 -1.50596277 -0.51687637
[121] -1.41438070 -1.13963448 -0.68172411 -0.46192713 -1.59754485 -0.60845845
[127] -0.93815391 -0.44361071 -0.90152108  0.03261607 -0.99310316 -0.15054808
[133] -1.30448221 -1.17626731 -1.06636882 -0.51687637 -1.52427919 -0.68172411
[139] -1.26784938 -0.77330618 -0.68172411 -0.60845845 -2.16535371 -0.59014203
[145] -1.21290014 -0.90152108 -0.86488825 -1.34111504 -1.45101353 -1.12131806
[151] -1.45101353 -0.44361071  0.39894437  1.11328455  0.87517115  1.11328455
[157]  0.67369059  0.47221003  0.27072946  0.50884286 -0.11391525  0.52715927
[163] -0.55350920  0.93012040  0.28904588  0.82022191  0.34399512  0.98506964
[169] -0.35202864  0.96675323  0.41726078  0.87517115  1.14991738  0.21578022
[175]  0.47221003  0.43557720 -0.18718091  0.39894437  0.10588173  0.71032342
[181]  0.78358908  1.11328455  0.61874135 -0.20549732  0.21578022  2.87166037
[187]  0.94843681  0.82022191 -0.24213015  0.08756532  0.01429966  0.87517115
[193] -0.22381374  1.04001889  0.25241305  1.04001889  1.20486662 -0.05896600
[199]  0.28904588  1.20486662  0.17914739  0.23409663  0.49052644  0.83853832
[205]  0.21578022  1.13160096  0.47221003  0.19746381 -0.02233317  0.28904588
[211] -0.13223166  1.18655021  0.25241305  0.41726078  0.32567871  1.90089038
[217]  0.34399512  1.07665172  0.41726078  1.02170247 -0.07728242  1.24149945
[223]  0.69200701  0.45389361  0.78358908  0.47221003  0.45389361  0.85685474
[229]  0.65537418  1.31476511  0.23409663  0.23409663  0.94843681  1.57119492
[235]  0.63705776  1.11328455  0.17914739  1.25981586 -0.09559883  1.35139794
[241]  0.65537418  1.49792926  0.65537418  1.51624567  0.28904588  1.02170247
[247]  0.10588173  1.25981586  1.00338606  0.54547569  0.82022191  1.31476511
[253]  0.83853832  2.19395302  0.60042493  0.94843681  0.61874135  0.52715927
[259] -0.40697788  1.73604265 -0.11391525  0.76527266  1.20486662  1.07665172
[265] -0.07728242  1.38803077  0.41726078  2.04742170  0.10588173  0.89348757
[271]  0.60042493          NA  0.52715927  1.18655021  0.23409663  1.09496813
[277]  0.47221003  1.11328455  1.35139794  0.27072946  1.60782775  0.23409663
[283]  0.39894437  1.35139794  0.38062795  1.35139794  0.49052644  1.42466360
[289]  0.56379210  1.47961284  0.36231154  1.20486662  1.16823379  2.57859773
[295]  0.45389361  0.96675323 -0.27876298  0.83853832 -0.13223166  1.22318303
[301]  0.50884286  1.47961284  1.20486662  1.02170247  0.45389361  1.62614416
[307] -0.55350920  1.88257397 -0.26044656  1.29644869  1.05833530  0.65537418
[313]  0.67369059  1.47961284  0.54547569  1.75435906  0.93012040  0.41726078
[319]  1.27813228  0.28904588  1.27813228  1.25981586  1.13160096  0.93012040
[325]  1.38803077  1.07665172  0.76527266  1.36971435  0.32567871  1.24149945
[331] -0.26044656  1.51624567  0.23409663  0.98506964  1.14991738  0.30736229
[337]  1.46129643  0.52715927  0.32567871  2.17563660 -0.07728242  1.04001889
[343]  1.25981586  1.14991738</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tidyverse</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>standardise_tidy <span class="ot">&lt;-</span> <span class="cf">function</span>(x, my.na.rm) {</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  ({{ x }} <span class="sc">-</span> <span class="fu">mean</span>({{ x }}, <span class="at">na.rm =</span> my.na.rm)) <span class="sc">/</span> <span class="fu">sd</span>({{ x }}, <span class="at">na.rm =</span> my.na.rm)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>} </span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">st_bill_length =</span> <span class="fu">standardise_tidy</span>(<span class="at">x =</span> bill_length_mm, <span class="at">my.na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(bill_length_mm, st_bill_length)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 2
   bill_length_mm st_bill_length
            &lt;dbl&gt;          &lt;dbl&gt;
 1           39.1         -0.883
 2           39.5         -0.810
 3           40.3         -0.663
 4           NA           NA    
 5           36.7         -1.32 
 6           39.3         -0.847
 7           38.9         -0.920
 8           39.2         -0.865
 9           34.1         -1.80 
10           42           -0.352
# ℹ 334 more rows</code></pre>
</div>
</div>
</section>
<section id="exercise-4" class="level2">
<h2 class="anchored" data-anchor-id="exercise-4">5.2.1 Exercise</h2>
<p>How would you generalize the function <code>explore_penguins()</code> so you can use any data frame as input?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>penguins_num <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(species, sex, <span class="fu">where</span>(is.numeric))</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>explore_penguins <span class="ot">&lt;-</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(var) {</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(penguins_num, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> .data[[var]], <span class="at">color =</span> sex)) <span class="sc">+</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitterdodge</span>(), <span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"turquoise"</span>, <span class="st">"goldenrod1"</span>)) <span class="sc">+</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ylab</span>(var)</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a><span class="fu">explore_penguins</span>(<span class="st">"body_mass_g"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing non-finite values (`stat_boxplot()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="exercises_solutions_files/figure-html/5.2.1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>explore_df <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x_var, y_var, color) {</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">data =</span> df, <span class="fu">aes</span>(<span class="at">x =</span> .data[[x_var]], <span class="at">y =</span> .data[[y_var]], <span class="at">color =</span> .data[[color]])) <span class="sc">+</span> </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitterdodge</span>(), <span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">rainbow</span>(<span class="at">n =</span> <span class="fu">length</span>(<span class="fu">unique</span>(df[[color]])))) <span class="sc">+</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span> </span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(y_var)</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="fu">explore_df</span>(<span class="at">df =</span> iris, <span class="co"># iris is a dataset loaded in RStudio by default</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">y_var =</span> <span class="st">"Petal.Length"</span>,</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>           <span class="at">x_var =</span> <span class="st">"Species"</span>,</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> <span class="st">"Species"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="exercises_solutions_files/figure-html/5.2.1-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="exercise-5" class="level2">
<h2 class="anchored" data-anchor-id="exercise-5">8.1.1 Exercise</h2>
<p>Generate a vector, a function and apply the function to each of the elements of the vector using <code>map()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>sum_10 <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">+</span> <span class="dv">10</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, sum_10) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 11

[[2]]
[1] 12

[[3]]
[1] 13

[[4]]
[1] 14</code></pre>
</div>
</div>
</section>
<section id="exercise-6" class="level2">
<h2 class="anchored" data-anchor-id="exercise-6">8.1.2 Exercise</h2>
<p>Now that you have understood the logic of <code>map()</code>, spot the differences between the following three lines of code. What does the <code>map()</code> functional do? What differences do you detect in the code? And at the output?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(penguins, \(x) <span class="fu">mean</span>(x)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in mean.default(x): argument is not numeric or logical: returning NA

Warning in mean.default(x): argument is not numeric or logical: returning NA

Warning in mean.default(x): argument is not numeric or logical: returning NA</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>$species
[1] NA

$island
[1] NA

$bill_length_mm
[1] NA

$bill_depth_mm
[1] NA

$flipper_length_mm
[1] NA

$body_mass_g
[1] NA

$sex
[1] NA

$year
[1] 2008.029</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(penguins, \(x) <span class="fu">mean</span>(x, <span class="at">na.rm =</span> T)) <span class="co"># option 1 </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in mean.default(x, na.rm = T): argument is not numeric or logical:
returning NA</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in mean.default(x, na.rm = T): argument is not numeric or logical:
returning NA

Warning in mean.default(x, na.rm = T): argument is not numeric or logical:
returning NA</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>$species
[1] NA

$island
[1] NA

$bill_length_mm
[1] 43.92193

$bill_depth_mm
[1] 17.15117

$flipper_length_mm
[1] 200.9152

$body_mass_g
[1] 4201.754

$sex
[1] NA

$year
[1] 2008.029</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(penguins, mean, <span class="at">na.rm =</span> T) <span class="co"># option 2 </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in mean.default(.x[[i]], ...): argument is not numeric or logical:
returning NA</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in mean.default(.x[[i]], ...): argument is not numeric or logical:
returning NA

Warning in mean.default(.x[[i]], ...): argument is not numeric or logical:
returning NA</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>$species
[1] NA

$island
[1] NA

$bill_length_mm
[1] 43.92193

$bill_depth_mm
[1] 17.15117

$flipper_length_mm
[1] 200.9152

$body_mass_g
[1] 4201.754

$sex
[1] NA

$year
[1] 2008.029</code></pre>
</div>
</div>
<p>The first and second <code>map()</code> use anonymous functions (<code>\(x)</code>) while the third does not. The first returns many <code>NA</code> because some cells of numeric variables in the penguins dataset contain <code>NA</code>, and by default, <code>mean()</code> returns <code>NA</code> if it detects any <code>NA</code> in the variables to which <code>mean()</code> is applied. The result of the second and third <code>map()</code> is the same. However, in the second <code>map()</code>, additional arguments are passed to <code>mean()</code> through the anonymous function. In the third <code>map()</code>, since <code>map()</code> includes <code>...</code> among its arguments, additional arguments can be included after the function within <code>map()</code> in a much simpler way. The additional arguments can be used for any function included in the iteration.</p>
</section>
<section id="exercise-7" class="level2">
<h2 class="anchored" data-anchor-id="exercise-7">8.2.1 Exercise</h2>
<p>Take a couple of minutes to understand what the following functions do:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map_lgl</span>(penguins, is.numeric) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          species            island    bill_length_mm     bill_depth_mm 
            FALSE             FALSE              TRUE              TRUE 
flipper_length_mm       body_mass_g               sex              year 
             TRUE              TRUE             FALSE              TRUE </code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>penguins_num <span class="ot">&lt;-</span> penguins[ , <span class="fu">map_lgl</span>(penguins, is.numeric)]  </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="fu">map_dbl</span>(penguins_num, median, <span class="at">na.rm =</span> T) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   bill_length_mm     bill_depth_mm flipper_length_mm       body_mass_g 
            44.45             17.30            197.00           4050.00 
             year 
          2008.00 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map_chr</span>(penguins, class) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          species            island    bill_length_mm     bill_depth_mm 
         "factor"          "factor"         "numeric"         "numeric" 
flipper_length_mm       body_mass_g               sex              year 
        "integer"         "integer"          "factor"         "integer" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map_int</span>(penguins, \(x) <span class="fu">length</span>(<span class="fu">unique</span>(x))) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          species            island    bill_length_mm     bill_depth_mm 
                3                 3               165                81 
flipper_length_mm       body_mass_g               sex              year 
               56                95                 3                 3 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">4</span> <span class="sc">|&gt;</span>   </span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_vec</span>(\(x) <span class="fu">as.Date</span>(<span class="fu">ISOdate</span>(x <span class="sc">+</span> <span class="dv">2024</span>, <span class="dv">05</span>, <span class="dv">13</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2025-05-13" "2026-05-13" "2027-05-13" "2028-05-13"</code></pre>
</div>
</div>
<p><code>map_lgl()</code> returns a logical vector indicating whether each column in the penguins dataset is numeric or not.</p>
<p>In the next line, we use the logical vector generated by <code>map_lgl()</code> to select the numeric variables from the penguins dataset.</p>
<p><code>map_dbl()</code> returns a numeric vector by calculating the median of each numeric variable in the penguins dataset.</p>
<p><code>map_chr()</code> returns a character vector indicating the class of each column in the penguins dataset.</p>
<p><code>map_int()</code> returns an integer vector that gives the number of unique observations in each variable of the penguins dataset, including NA.</p>
<p><code>map_vec()</code> automatically determines the output type, which in this case, returns a vector of type date.</p>
</section>
<section id="exercise-8" class="level2">
<h2 class="anchored" data-anchor-id="exercise-8">9.1.1 Exercise</h2>
<p>From the code shown below, generate a <code>data.frame</code>, adding a column to the <code>data.frame</code> with the name that we have assigned to each list.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>penguins_list <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span>   </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_split</span>(species)  </span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="co"># we assign names to the list</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(penguins_list) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"p1"</span>, <span class="st">"p2"</span>, <span class="st">"p3"</span>)  </span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a><span class="co"># solution:</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a><span class="fu">map2</span>(penguins_list, <span class="fu">names</span>(penguins_list), \(df, name) <span class="fu">mutate</span>(df, <span class="at">name =</span> name)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$p1
# A tibble: 152 × 9
   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Adelie  Torgersen           39.1          18.7               181        3750
 2 Adelie  Torgersen           39.5          17.4               186        3800
 3 Adelie  Torgersen           40.3          18                 195        3250
 4 Adelie  Torgersen           NA            NA                  NA          NA
 5 Adelie  Torgersen           36.7          19.3               193        3450
 6 Adelie  Torgersen           39.3          20.6               190        3650
 7 Adelie  Torgersen           38.9          17.8               181        3625
 8 Adelie  Torgersen           39.2          19.6               195        4675
 9 Adelie  Torgersen           34.1          18.1               193        3475
10 Adelie  Torgersen           42            20.2               190        4250
# ℹ 142 more rows
# ℹ 3 more variables: sex &lt;fct&gt;, year &lt;int&gt;, name &lt;chr&gt;

$p2
# A tibble: 68 × 9
   species   island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;     &lt;fct&gt;           &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Chinstrap Dream            46.5          17.9               192        3500
 2 Chinstrap Dream            50            19.5               196        3900
 3 Chinstrap Dream            51.3          19.2               193        3650
 4 Chinstrap Dream            45.4          18.7               188        3525
 5 Chinstrap Dream            52.7          19.8               197        3725
 6 Chinstrap Dream            45.2          17.8               198        3950
 7 Chinstrap Dream            46.1          18.2               178        3250
 8 Chinstrap Dream            51.3          18.2               197        3750
 9 Chinstrap Dream            46            18.9               195        4150
10 Chinstrap Dream            51.3          19.9               198        3700
# ℹ 58 more rows
# ℹ 3 more variables: sex &lt;fct&gt;, year &lt;int&gt;, name &lt;chr&gt;

$p3
# A tibble: 124 × 9
   species island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;   &lt;fct&gt;           &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Gentoo  Biscoe           46.1          13.2               211        4500
 2 Gentoo  Biscoe           50            16.3               230        5700
 3 Gentoo  Biscoe           48.7          14.1               210        4450
 4 Gentoo  Biscoe           50            15.2               218        5700
 5 Gentoo  Biscoe           47.6          14.5               215        5400
 6 Gentoo  Biscoe           46.5          13.5               210        4550
 7 Gentoo  Biscoe           45.4          14.6               211        4800
 8 Gentoo  Biscoe           46.7          15.3               219        5200
 9 Gentoo  Biscoe           43.3          13.4               209        4400
10 Gentoo  Biscoe           46.8          15.4               215        5150
# ℹ 114 more rows
# ℹ 3 more variables: sex &lt;fct&gt;, year &lt;int&gt;, name &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="advanced-exercise" class="level2">
<h2 class="anchored" data-anchor-id="advanced-exercise">9.1.2 Advanced exercise</h2>
<p>Calculate the correlation between the predictions stored in the list-column <code>pred</code> and <code>bill_length_mm</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># first we remove NA values from bill_length_mm </span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>penguins_nona <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span>    </span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(bill_length_mm) </span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>penguins_nested <span class="ot">&lt;-</span> penguins_nona <span class="sc">|&gt;</span>   </span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">|&gt;</span>   </span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">|&gt;</span>    </span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(     </span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">lm_obj =</span> <span class="fu">map</span>(data, \(df) <span class="fu">lm</span>(       </span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>      bill_length_mm <span class="sc">~</span> body_mass_g,       </span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">data =</span> df)),     </span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">pred =</span> <span class="fu">map2</span>(lm_obj, data, \(x, y) <span class="fu">predict</span>(x, y)),</span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># solution:     </span></span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">corr =</span> <span class="fu">map2_dbl</span>(pred, data, \(x, y) <span class="fu">cor</span>(x, y<span class="sc">$</span>bill_length_mm))   </span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>    )  </span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a><span class="co"># unnest() </span></span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a>penguins_nested <span class="sc">|&gt;</span>    </span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(pred) <span class="sc">|&gt;</span>    </span>
<span id="cb50-20"><a href="#cb50-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(data, lm_obj)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 342 × 3
# Groups:   species [3]
   species  pred  corr
   &lt;fct&gt;   &lt;dbl&gt; &lt;dbl&gt;
 1 Adelie   38.9 0.549
 2 Adelie   39.1 0.549
 3 Adelie   37.4 0.549
 4 Adelie   38.0 0.549
 5 Adelie   38.6 0.549
 6 Adelie   38.6 0.549
 7 Adelie   41.9 0.549
 8 Adelie   38.1 0.549
 9 Adelie   40.5 0.549
10 Adelie   37.5 0.549
# ℹ 332 more rows</code></pre>
</div>
</div>
</section>
<section id="exercise-9" class="level2">
<h2 class="anchored" data-anchor-id="exercise-9">9.2.1 Exercise</h2>
<p>Transform the <code>map2()</code> that you have generated in the exercise 9.1.1 to <code>pmap()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># exercise 9.1.1 </span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>penguins_list <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span>   </span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_split</span>(species)  </span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="co"># we assign names to the list</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(penguins_list) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"p1"</span>, <span class="st">"p2"</span>, <span class="st">"p3"</span>)  </span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a><span class="co"># exercise 9.2.1 </span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a><span class="fu">pmap</span>(<span class="fu">list</span>(penguins_list, <span class="fu">names</span>(penguins_list)), </span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>  \(df, name) <span class="fu">mutate</span>(df, <span class="at">name =</span> name)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$p1
# A tibble: 152 × 9
   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Adelie  Torgersen           39.1          18.7               181        3750
 2 Adelie  Torgersen           39.5          17.4               186        3800
 3 Adelie  Torgersen           40.3          18                 195        3250
 4 Adelie  Torgersen           NA            NA                  NA          NA
 5 Adelie  Torgersen           36.7          19.3               193        3450
 6 Adelie  Torgersen           39.3          20.6               190        3650
 7 Adelie  Torgersen           38.9          17.8               181        3625
 8 Adelie  Torgersen           39.2          19.6               195        4675
 9 Adelie  Torgersen           34.1          18.1               193        3475
10 Adelie  Torgersen           42            20.2               190        4250
# ℹ 142 more rows
# ℹ 3 more variables: sex &lt;fct&gt;, year &lt;int&gt;, name &lt;chr&gt;

$p2
# A tibble: 68 × 9
   species   island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;     &lt;fct&gt;           &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Chinstrap Dream            46.5          17.9               192        3500
 2 Chinstrap Dream            50            19.5               196        3900
 3 Chinstrap Dream            51.3          19.2               193        3650
 4 Chinstrap Dream            45.4          18.7               188        3525
 5 Chinstrap Dream            52.7          19.8               197        3725
 6 Chinstrap Dream            45.2          17.8               198        3950
 7 Chinstrap Dream            46.1          18.2               178        3250
 8 Chinstrap Dream            51.3          18.2               197        3750
 9 Chinstrap Dream            46            18.9               195        4150
10 Chinstrap Dream            51.3          19.9               198        3700
# ℹ 58 more rows
# ℹ 3 more variables: sex &lt;fct&gt;, year &lt;int&gt;, name &lt;chr&gt;

$p3
# A tibble: 124 × 9
   species island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;   &lt;fct&gt;           &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Gentoo  Biscoe           46.1          13.2               211        4500
 2 Gentoo  Biscoe           50            16.3               230        5700
 3 Gentoo  Biscoe           48.7          14.1               210        4450
 4 Gentoo  Biscoe           50            15.2               218        5700
 5 Gentoo  Biscoe           47.6          14.5               215        5400
 6 Gentoo  Biscoe           46.5          13.5               210        4550
 7 Gentoo  Biscoe           45.4          14.6               211        4800
 8 Gentoo  Biscoe           46.7          15.3               219        5200
 9 Gentoo  Biscoe           43.3          13.4               209        4400
10 Gentoo  Biscoe           46.8          15.4               215        5150
# ℹ 114 more rows
# ℹ 3 more variables: sex &lt;fct&gt;, year &lt;int&gt;, name &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="exercise-10" class="level2">
<h2 class="anchored" data-anchor-id="exercise-10">10.1.1 Exercise</h2>
<p>Based on what it says in the definition about the <code>walk()</code> family, run this code and understand what it does.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>penguins_nested <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span>   </span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">|&gt;</span>   </span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>()  </span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>penguins_nested_str <span class="ot">&lt;-</span> penguins_nested <span class="sc">|&gt;</span>    </span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">path =</span> <span class="fu">str_glue</span>(<span class="st">"penguins_{species}.csv"</span>)) </span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>penguins_nested_str  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
# Groups:   species [3]
  species   data               path                  
  &lt;fct&gt;     &lt;list&gt;             &lt;glue&gt;                
1 Adelie    &lt;tibble [152 × 7]&gt; penguins_Adelie.csv   
2 Gentoo    &lt;tibble [124 × 7]&gt; penguins_Gentoo.csv   
3 Chinstrap &lt;tibble [68 × 7]&gt;  penguins_Chinstrap.csv</code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">walk2</span>(penguins_nested_str<span class="sc">$</span>data, penguins_nested_str<span class="sc">$</span>path, write_csv) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Using the <code>nest()</code> function from {tidyr}, we generate list-columns in the penguins data frame, creating a row for each penguin species. Since it is a data frame, we can directly apply the <code>mutate()</code> function to it, generating the <code>path</code> variable that contains the output name we want to assign to each dataset. Finally, using the <code>walk2()</code> function, we save the data related to each penguin with its respective path that we generated earlier. We could substitute walk2 by map2 and files would be created as well, but also it would return the output in the console and we don’t need it.</p>
</section>
<section id="advanced-exercise-1" class="level2">
<h2 class="anchored" data-anchor-id="advanced-exercise-1">10.1.2 Advanced exercise</h2>
<p>Generate an example where you use <code>walk2()</code> or <code>pwalk()</code> to save multiple plots generated with <code>ggplot()</code>. Hint: the first entry will be the plot you want to save and the second the name of the file you want to give it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>gg_penguins_bill_body <span class="ot">&lt;-</span> <span class="cf">function</span>(data_df) {</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">data =</span> data_df, <span class="fu">aes</span>(<span class="at">x =</span> bill_length_mm, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span>     </span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>}  </span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>penguins_nested <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span>   </span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">|&gt;</span>   </span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">|&gt;</span>   </span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gg_obj =</span> <span class="fu">map</span>(data, </span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>    \(df) <span class="fu">gg_penguins_bill_body</span>(<span class="at">data_df =</span> df))) </span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>penguins_nested_str <span class="ot">&lt;-</span> penguins_nested <span class="sc">|&gt;</span>    </span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">path =</span> <span class="fu">str_glue</span>(<span class="st">"penguins_{species}.png"</span>))  </span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a>penguins_nested_str  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
# Groups:   species [3]
  species   data               gg_obj path                  
  &lt;fct&gt;     &lt;list&gt;             &lt;list&gt; &lt;glue&gt;                
1 Adelie    &lt;tibble [152 × 7]&gt; &lt;gg&gt;   penguins_Adelie.png   
2 Gentoo    &lt;tibble [124 × 7]&gt; &lt;gg&gt;   penguins_Gentoo.png   
3 Chinstrap &lt;tibble [68 × 7]&gt;  &lt;gg&gt;   penguins_Chinstrap.png</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pwalk</span>(<span class="fu">list</span>(<span class="at">plot =</span> penguins_nested_str<span class="sc">$</span>gg_obj, <span class="at">filename =</span> penguins_nested_str<span class="sc">$</span>path),</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  ggsave) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
</div>
</section>
<section id="exercise-11" class="level2">
<h2 class="anchored" data-anchor-id="exercise-11">11.3.1 Exercise</h2>
<p>Use any variant of <code>map()</code> along with a function operator to the penguins database.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span>    </span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="fu">safely</span>(log)) <span class="sc">|&gt;</span>    </span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transpose</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$result
$result$species
NULL

$result$island
NULL

$result$bill_length_mm
  [1] 3.666122 3.676301 3.696351       NA 3.602777 3.671225 3.660994 3.668677
  [9] 3.529297 3.737670 3.632309 3.632309 3.716008 3.653252 3.543854 3.600048
 [17] 3.655840 3.749504 3.538057 3.828641 3.632309 3.629660 3.580737 3.642836
 [25] 3.658420 3.563883 3.703768 3.701302 3.634951 3.701302 3.676301 3.616309
 [33] 3.676301 3.711130 3.594569 3.668677 3.658420 3.742420 3.627004 3.683867
 [41] 3.597312 3.708682 3.583519 3.786460 3.610918 3.678829 3.716008 3.624341
 [49] 3.583519 3.744787 3.678829 3.691376 3.555348 3.737670 3.540959 3.723281
 [57] 3.663562 3.703768 3.597312 3.627004 3.575151 3.720862 3.627004 3.716008
 [65] 3.594569 3.728100 3.569533 3.716008 3.580737 3.732896 3.511545 3.681351
 [73] 3.678829 3.824284 3.569533 3.756538 3.711130 3.616309 3.589059 3.740048
 [81] 3.543854 3.758872 3.602777 3.558201 3.618993 3.720862 3.591818 3.608212
 [89] 3.645450 3.660994 3.575151 3.716008 3.526361 3.678829 3.589059 3.708682
 [97] 3.640214 3.696351 3.499533 3.765840 3.555348 3.713572 3.629660 3.632309
[105] 3.634951 3.681351 3.653252 3.642836 3.640214 3.765840 3.640214 3.819908
[113] 3.681351 3.742420 3.678829 3.754199 3.653252 3.618993 3.575151 3.716008
[121] 3.589059 3.629660 3.693867 3.723281 3.561046 3.703768 3.658420 3.725693
[129] 3.663562 3.786460 3.650658 3.763523 3.605498 3.624341 3.640214 3.716008
[137] 3.572346 3.693867 3.610918 3.681351 3.693867 3.703768 3.468856 3.706228
[145] 3.618993 3.663562 3.668677 3.600048 3.583519 3.632309 3.583519 3.725693
[153] 3.830813 3.912023 3.885679 3.912023 3.862833 3.839452 3.815512 3.843744
[161] 3.768153 3.845883 3.711130 3.891820 3.817712 3.879500 3.824284 3.897924
[169] 3.737670 3.895894 3.832980 3.885679 3.916015 3.808882 3.839452 3.835142
[177] 3.758872 3.830813 3.795489 3.867026 3.875359 3.912023 3.856510 3.756538
[185] 3.808882 4.087656 3.893859 3.879500 3.751854 3.793239 3.784190 3.885679
[193] 3.754199 3.903991 3.813307 3.903991 3.921973 3.775057 3.817712 3.921973
[201] 3.804438 3.811097 3.841601 3.881564 3.808882 3.914021 3.839452 3.806662
[209] 3.779634 3.817712 3.765840 3.919991 3.813307 3.832980 3.822098 3.994524
[217] 3.824284 3.908015 3.832980 3.901973 3.772761 3.925926 3.864931 3.837299
[225] 3.875359 3.839452 3.837299 3.883624 3.860730 3.933784 3.811097 3.811097
[233] 3.893859 3.960813 3.858622 3.912023 3.804438 3.927896 3.770459 3.937691
[241] 3.860730 3.953165 3.860730 3.955082 3.817712 3.901973 3.795489 3.927896
[249] 3.899950 3.848018 3.879500 3.933784 3.881564 4.023564 3.854394 3.893859
[257] 3.856510 3.845883 3.730501 3.977811 3.768153 3.873282 3.921973 3.908015
[265] 3.772761 3.941582 3.832980 4.009150 3.795489 3.887730 3.854394       NA
[273] 3.845883 3.919991 3.811097 3.910021 3.839452 3.912023 3.937691 3.815512
[281] 3.964615 3.811097 3.830813 3.937691 3.828641 3.937691 3.841601 3.945458
[289] 3.850148 3.951244 3.826465 3.921973 3.918005 4.060443 3.837299 3.895894
[297] 3.747148 3.881564 3.765840 3.923952 3.843744 3.951244 3.921973 3.901973
[305] 3.837299 3.966511 3.711130 3.992681 3.749504 3.931826 3.906005 3.860730
[313] 3.862833 3.951244 3.848018 3.979682 3.891820 3.832980 3.929863 3.817712
[321] 3.929863 3.927896 3.914021 3.891820 3.941582 3.908015 3.873282 3.939638
[329] 3.822098 3.925926 3.749504 3.955082 3.811097 3.897924 3.916015 3.819908
[337] 3.949319 3.845883 3.822098 4.021774 3.772761 3.903991 3.927896 3.916015

$result$bill_depth_mm
  [1] 2.928524 2.856470 2.890372       NA 2.960105 3.025291 2.879198 2.975530
  [9] 2.895912 3.005683 2.839078 2.850707 2.867899 3.054001 3.049273 2.879198
 [17] 2.944439 3.030134 2.912351 3.068053 2.906901 2.928524 2.954910 2.895912
 [25] 2.844909 2.939162 2.923162 2.884801 2.923162 2.939162 2.815409 2.895912
 [33] 2.879198 2.939162 2.833213 3.049273 2.995732 2.917771 2.960105 2.949688
 [41] 2.890372 2.912351 2.917771 2.980619 2.827314 2.933857 2.944439 2.939162
 [49] 2.884801 3.054001 2.873565 2.939162 2.884801 2.970414 2.895912 2.923162
 [57] 2.862201 2.933857 2.809403 2.949688 2.827314 3.049273 2.833213 2.901422
 [65] 2.839078 2.890372 2.785011 2.949688 2.809403 2.965273 2.944439 2.912351
 [73] 2.844909 2.939162 2.862201 2.917771 2.821379 2.965273 2.778819 2.949688
 [81] 2.844909 2.867899 2.933857 2.965273 2.879198 3.010621 2.970414 2.923162
 [89] 2.954910 2.933857 2.890372 2.895912 2.839078 2.895912 2.850707 2.939162
 [97] 2.923162 2.917771 2.778819 2.917771 2.884801 2.995732 2.772589 2.995732
[105] 2.923162 2.939162 2.844909 2.995732 2.833213 2.944439 2.803360 3.010621
[113] 2.873565 2.970414 3.030134 2.906901 2.833213 3.020425 2.833213 2.923162
[121] 2.844909 2.985682 2.833213 2.917771 2.766319 2.944439 2.867899 2.906901
[129] 2.839078 2.890372 2.884801 2.954910 2.917771 2.917771 2.867899 2.862201
[137] 2.862201 3.000720 2.803360 2.884801 2.839078 2.844909 2.740840 2.833213
[145] 2.821379 2.928524 2.923162 2.912351 2.879198 2.895912 2.839078 2.917771
[153] 2.580217 2.791165 2.646175 2.721295 2.674149 2.602690 2.681022 2.727853
[161] 2.595255 2.734368 2.617396 2.778819 2.617396 2.681022 2.681022 2.753661
[169] 2.602690 2.721295 2.674149 2.714695 2.660260 2.674149 2.674149 2.760010
[177] 2.572612 2.714695 2.660260 2.708050 2.660260 2.727853 2.727853 2.653242
[185] 2.674149 2.833213 2.694627 2.791165 2.617396 2.850707 2.610070 2.753661
[193] 2.617396 2.772589 2.617396 2.708050 2.766319 2.631889 2.631889 2.766319
[201] 2.587764 2.760010 2.653242 2.646175 2.667228 2.708050 2.667228 2.734368
[209] 2.631889 2.708050 2.674149 2.727853 2.624669 2.701361 2.631889 2.753661
[217] 2.653242 2.821379 2.667228 2.785011 2.653242 2.708050 2.708050 2.747271
[225] 2.747271 2.694627 2.708050 2.772589 2.653242 2.791165 2.624669 2.797281
[233] 2.674149 2.747271 2.681022 2.766319 2.624669 2.850707 2.667228 2.653242
[241] 2.639057 2.833213 2.708050 2.839078 2.674149 2.778819 2.687847 2.753661
[249] 2.760010 2.681022 2.667228 2.803360 2.708050 2.833213 2.740840 2.708050
[257] 2.624669 2.778819 2.687847 2.760010 2.639057 2.714695 2.721295 2.766319
[265] 2.721295 2.791165 2.646175 2.772589 2.753661 2.785011 2.617396       NA
[273] 2.660260 2.753661 2.694627 2.778819 2.884801 2.970414 2.954910 2.928524
[281] 2.985682 2.879198 2.901422 2.901422 2.939162 2.990720 2.879198 3.010621
[289] 2.850707 2.895912 2.839078 2.975530 2.995732 2.879198 2.923162 2.901422
[297] 2.850707 2.862201 2.809403 2.965273 2.884801 2.944439 2.912351 2.944439
[305] 2.879198 2.995732 2.809403 3.034953 2.815409 2.933857 2.923162 2.821379
[313] 2.906901 3.030134 2.809403 2.990720 2.970414 2.862201 2.949688 2.833213
[321] 2.884801 2.917771 2.884801 2.975530 2.928524 2.850707 2.797281 2.944439
[329] 2.850707 2.980619 2.850707 2.933857 2.809403 2.990720 2.933857 2.965273
[337] 2.970414 2.803360 2.833213 2.985682 2.895912 2.901422 2.944439 2.928524

$result$flipper_length_mm
  [1] 5.198497 5.225747 5.273000       NA 5.262690 5.247024 5.198497 5.273000
  [9] 5.262690 5.247024 5.225747 5.192957 5.204007 5.252273 5.288267 5.220356
 [17] 5.273000 5.283204 5.214936 5.267858 5.159055 5.192957 5.241747 5.220356
 [25] 5.192957 5.231109 5.209486 5.231109 5.147494 5.192957 5.181784 5.181784
 [33] 5.236442 5.214936 5.273000 5.278115 5.247024 5.192957 5.198497 5.214936
 [41] 5.204007 5.273000 5.225747 5.278115 5.220356 5.247024 5.204007 5.187386
 [49] 5.247024 5.252273 5.225747 5.236442 5.247024 5.298317 5.231109 5.252273
 [57] 5.225747 5.262690 5.198497 5.267858 5.220356 5.273000 5.220356 5.257495
 [65] 5.214936 5.257495 5.273000 5.236442 5.247024 5.288267 5.247024 5.247024
 [73] 5.278115 5.283204 5.247024 5.273000 5.252273 5.214936 5.231109 5.273000
 [81] 5.241747 5.278115 5.231109 5.262690 5.252273 5.267858 5.247024 5.241747
 [89] 5.241747 5.247024 5.308268 5.323010 5.220356 5.225747 5.231109 5.337538
 [97] 5.247024 5.278115 5.181784 5.257495 5.257495 5.313206 5.209486 5.247024
[105] 5.262690 5.214936 5.293305 5.247024 5.198497 5.283204 5.288267 5.252273
[113] 5.262690 5.283204 5.252273 5.278115 5.236442 5.293305 5.241747 5.241747
[121] 5.231109 5.288267 5.170484 5.308268 5.225747 5.293305 5.252273 5.273000
[129] 5.252273 5.347108 5.247024 5.283204 5.262690 5.293305 5.231109 5.247024
[137] 5.252273 5.298317 5.220356 5.262690 5.262690 5.231109 5.236442 5.247024
[145] 5.257495 5.220356 5.247024 5.214936 5.273000 5.262690 5.231109 5.303305
[153] 5.351858 5.438079 5.347108 5.384495 5.370638 5.347108 5.351858 5.389072
[161] 5.342334 5.370638 5.365976 5.375278 5.365976 5.361292 5.347108 5.379897
[169] 5.347108 5.398163 5.342334 5.402677 5.384495 5.370638 5.361292 5.370638
[177] 5.370638 5.370638 5.375278 5.370638 5.347108 5.393628 5.402677 5.342334
[185] 5.332719 5.438079 5.393628 5.393628 5.361292 5.389072 5.337538 5.337538
[193] 5.337538 5.416100 5.347108 5.375278 5.402677 5.379897 5.347108 5.416100
[201] 5.361292 5.370638 5.347108 5.393628 5.347108 5.416100 5.379897 5.393628
[209] 5.337538 5.393628 5.337538 5.411646 5.337538 5.398163 5.365976 5.442418
[217] 5.389072 5.438079 5.365976 5.433722 5.393628 5.407172 5.375278 5.398163
[225] 5.398163 5.379897 5.375278 5.438079 5.342334 5.393628 5.370638 5.407172
[233] 5.356586 5.398163 5.356586 5.411646 5.356586 5.429346 5.384495 5.384495
[241] 5.356586 5.438079 5.384495 5.429346 5.356586 5.411646 5.365976 5.420535
[249] 5.375278 5.402677 5.313206 5.416100 5.389072 5.429346 5.370638 5.429346
[257] 5.375278 5.370638 5.347108 5.389072 5.337538 5.342334 5.375278 5.433722
[265] 5.361292 5.438079 5.379897 5.438079 5.379897 5.402677 5.365976       NA
[273] 5.370638 5.402677 5.356586 5.361292 5.257495 5.278115 5.262690 5.236442
[281] 5.283204 5.288267 5.181784 5.283204 5.273000 5.288267 5.262690 5.267858
[289] 5.220356 5.303305 5.247024 5.303305 5.283204 5.198497 5.247024 5.273000
[297] 5.198497 5.252273 5.231109 5.262690 5.273000 5.283204 5.298317 5.298317
[305] 5.252273 5.323010 5.231109 5.303305 5.231109 5.313206 5.273000 5.293305
[313] 5.273000 5.347108 5.257495 5.323010 5.347108 5.231109 5.278115 5.278115
[321] 5.278115 5.303305 5.247024 5.356586 5.231109 5.288267 5.293305 5.303305
[329] 5.262690 5.313206 5.231109 5.283204 5.252273 5.313206 5.308268 5.267858
[337] 5.327876 5.241747 5.273000 5.332719 5.308268 5.262690 5.347108 5.288267

$result$body_mass_g
  [1] 8.229511 8.242756 8.086410       NA 8.146130 8.202482 8.195610 8.449984
  [9] 8.153350 8.354674 8.101678 8.216088 8.070906 8.242756 8.389360 8.216088
 [17] 8.146130 8.411833 8.109225 8.342840 8.131531 8.188689 8.242756 8.281471
 [25] 8.242756 8.242756 8.174703 8.070906 8.055158 8.281471 8.086410 8.268732
 [33] 8.101678 8.268732 8.109225 8.330864 8.281471 8.174703 8.101678 8.444622
 [41] 8.055158 8.268732 8.039157 8.389360 8.006368 8.433812 8.138857 7.997999
 [49] 8.146130 8.330864 8.160518 8.366370 8.146130 8.306472 7.972466 8.216088
 [57] 8.174703 8.242756 7.955074 8.229511 8.055158 8.389360 8.188689 8.306472
 [65] 7.955074 8.281471 8.116716 8.318742 8.022897 8.400659 8.188689 8.268732
 [73] 8.174703 8.330864 8.216088 8.354674 8.216088 8.268732 8.174703 8.294050
 [81] 8.070906 8.455318 8.242756 8.342840 8.116716 8.174703 8.242756 8.160518
 [89] 8.281471 8.188689 8.174703 8.366370 8.131531 8.400659 8.101678 8.366370
 [97] 8.216088 8.377931 7.972466 8.318742 8.222822 8.460623 8.031060 8.354674
[105] 7.981050 8.174703 8.229511 8.268732 8.063063 8.471149 8.249314 8.433812
[113] 8.070906 8.360539 8.268732 8.312626 7.972466 8.236156 8.116716 8.109225
[121] 8.055158 8.160518 8.146130 8.262301 8.022897 8.294050 8.094073 8.366370
[129] 8.022897 8.294050 8.109225 8.160518 8.160518 8.406262 8.138857 8.268732
[137] 8.063063 8.287780 8.131531 8.354674 8.131531 8.153350 8.022897 8.222822
[145] 8.006368 8.202482 8.354674 8.153350 8.146130 8.229511 8.216088 8.294050
[153] 8.411833 8.648221 8.400659 8.648221 8.594154 8.422883 8.476371 8.556414
[161] 8.389360 8.546752 8.444622 8.621553 8.444622 8.674197 8.342840 8.674197
[169] 8.330864 8.748305 8.476371 8.584852 8.648221 8.517193 8.389360 8.527144
[177] 8.517193 8.536996 8.318742 8.639411 8.433812 8.621553 8.565983 8.455318
[185] 8.527144 8.707814 8.546752 8.594154 8.507143 8.565983 8.377931 8.584852
[193] 8.281471 8.648221 8.366370 8.465900 8.621553 8.496990 8.342840 8.594154
[201] 8.536996 8.575462 8.486734 8.575462 8.389360 8.517193 8.496990 8.527144
[209] 8.366370 8.517193 8.400659 8.621553 8.342840 8.575462 8.389360 8.639411
[217] 8.455318 8.648221 8.444622 8.665613 8.455318 8.621553 8.465900 8.517193
[225] 8.536996 8.556414 8.455318 8.665613 8.433812 8.699515 8.465900 8.691146
[233] 8.439232 8.603371 8.460623 8.584852 8.465900 8.630522 8.433812 8.575462
[241] 8.491875 8.621553 8.507143 8.594154 8.465900 8.639411 8.486734 8.556414
[249] 8.502080 8.491875 8.439232 8.565983 8.486734 8.630522 8.512181 8.612503
[257] 8.460623 8.612503 8.455318 8.612503 8.428362 8.612503 8.517193 8.691146
[265] 8.444622 8.612503 8.383662 8.674197 8.491875 8.699515 8.502080       NA
[273] 8.486734 8.656955 8.556414 8.594154 8.160518 8.268732 8.202482 8.167636
[281] 8.222822 8.281471 8.086410 8.229511 8.330864 8.216088 8.242756 8.236156
[289] 8.216088 8.306472 8.181720 8.306472 8.101678 8.216088 8.146130 8.389360
[297] 8.188689 8.131531 7.972466 8.242756 8.101678 8.330864 8.131531 8.242756
[305] 8.216088 8.422883 8.070906 8.366370 8.116716 8.318742 8.188689 8.268732
[313] 8.255828 8.476371 7.901007 8.411833 8.281471 8.202482 8.174703 8.160518
[321] 8.209308 8.400659 8.131531 8.366370 8.086410 8.209308 8.109225 8.281471
[329] 8.188689 8.306472 8.116716 8.146130 8.086410 8.306472 8.242756 8.167636
[337] 8.281471 8.202482 8.202482 8.294050 8.131531 8.236156 8.318742 8.236156

$result$sex
NULL

$result$year
  [1] 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396
  [9] 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396
 [17] 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396
 [25] 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396
 [33] 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396
 [41] 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396
 [49] 7.604396 7.604396 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894
 [57] 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894
 [65] 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894
 [73] 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894
 [81] 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894
 [89] 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894
 [97] 7.604894 7.604894 7.604894 7.604894 7.605392 7.605392 7.605392 7.605392
[105] 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392
[113] 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392
[121] 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392
[129] 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392
[137] 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392
[145] 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392
[153] 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396
[161] 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396
[169] 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396
[177] 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396
[185] 7.604396 7.604396 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894
[193] 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894
[201] 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894
[209] 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894
[217] 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894
[225] 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894
[233] 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392
[241] 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392
[249] 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392
[257] 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392
[265] 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392
[273] 7.605392 7.605392 7.605392 7.605392 7.604396 7.604396 7.604396 7.604396
[281] 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396
[289] 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396
[297] 7.604396 7.604396 7.604396 7.604396 7.604396 7.604396 7.604894 7.604894
[305] 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894
[313] 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894 7.604894
[321] 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392
[329] 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392
[337] 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392 7.605392


$error
$error$species
&lt;simpleError in Math.factor(x, base): 'log' not meaningful for factors&gt;

$error$island
&lt;simpleError in Math.factor(x, base): 'log' not meaningful for factors&gt;

$error$bill_length_mm
NULL

$error$bill_depth_mm
NULL

$error$flipper_length_mm
NULL

$error$body_mass_g
NULL

$error$sex
&lt;simpleError in Math.factor(x, base): 'log' not meaningful for factors&gt;

$error$year
NULL</code></pre>
</div>
</div>
<details>
<summary>
Session Info
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.time</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2024-06-05 11:53:32 CEST"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.2.2 (2022-10-31 ucrt)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 19045)

Matrix products: default

locale:
[1] LC_COLLATE=English_United Kingdom.utf8 
[2] LC_CTYPE=English_United Kingdom.utf8   
[3] LC_MONETARY=English_United Kingdom.utf8
[4] LC_NUMERIC=C                           
[5] LC_TIME=English_United Kingdom.utf8    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] forcats_0.5.1        stringr_1.5.0        dplyr_1.1.2         
 [4] purrr_1.0.1          readr_2.1.2          tidyr_1.3.0         
 [7] tibble_3.2.1         ggplot2_3.4.2        tidyverse_1.3.2     
[10] palmerpenguins_0.1.1

loaded via a namespace (and not attached):
 [1] lubridate_1.8.0     assertthat_0.2.1    digest_0.6.29      
 [4] utf8_1.2.3          R6_2.5.1            cellranger_1.1.0   
 [7] backports_1.4.1     reprex_2.0.1        evaluate_0.18      
[10] httr_1.4.3          pillar_1.9.0        rlang_1.1.1        
[13] googlesheets4_1.0.0 readxl_1.4.0        rstudioapi_0.13    
[16] rmarkdown_2.16      textshaping_0.3.6   labeling_0.4.2     
[19] googledrive_2.0.0   htmlwidgets_1.5.4   bit_4.0.5          
[22] munsell_0.5.0       broom_1.0.0         compiler_4.2.2     
[25] modelr_0.1.8        xfun_0.39           systemfonts_1.0.4  
[28] pkgconfig_2.0.3     htmltools_0.5.3     tidyselect_1.2.0   
[31] fansi_1.0.4         crayon_1.5.2        tzdb_0.3.0         
[34] dbplyr_2.2.1        withr_2.5.0         grid_4.2.2         
[37] jsonlite_1.8.0      gtable_0.3.3        lifecycle_1.0.3    
[40] DBI_1.1.3           magrittr_2.0.3      scales_1.2.1       
[43] cli_3.6.1           stringi_1.7.12      vroom_1.5.7        
[46] farver_2.1.1        fs_1.5.2            xml2_1.3.3         
[49] ragg_1.2.5          ellipsis_0.3.2      generics_0.1.3     
[52] vctrs_0.6.3         tools_4.2.2         bit64_4.0.5        
[55] glue_1.6.2          hms_1.1.1           parallel_4.2.2     
[58] fastmap_1.1.0       yaml_2.3.5          colorspace_2.1-0   
[61] gargle_1.2.0        rvest_1.0.2         knitr_1.40.1       
[64] haven_2.5.0        </code></pre>
</div>
</div>
</details>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>